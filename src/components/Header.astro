<header class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200/50 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-3 md:py-4">
      <!-- Logo with improved sizing and spacing -->
      <div class="flex-shrink-0 mr-2 md:mr-4">
        <a href="#home" class="flex items-center group">
          <div class="relative">
            <img src="/Screenshot 2025-06-03 at 11.38.23.png" alt="True North Equine Coaching" class="h-12 w-auto sm:h-14 md:h-16 lg:h-20 transition-transform duration-300 group-hover:scale-105">
            <!-- Subtle glow effect on hover -->
            <div class="absolute inset-0 rounded-full bg-[#283454]/5 scale-0 group-hover:scale-110 transition-transform duration-300"></div>
          </div>
        </a>
      </div>
      
      <!-- Desktop Navigation with CTA integrated -->
      <nav class="hidden md:flex items-center space-x-1" aria-label="Primary Navigation" role="navigation">
        <!-- Primary Group -->
        <a href="#home" class="nav-link primary text-gray-700 hover:text-[#283454] px-4 py-2 rounded-lg transition-all duration-300 font-semibold relative overflow-hidden group">
          <span class="relative z-10">Home</span>
          <div class="absolute inset-0 bg-[#283454]/5 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
        </a>
        <a href="#about" class="nav-link primary text-gray-700 hover:text-[#283454] px-4 py-2 rounded-lg transition-all duration-300 font-semibold relative overflow-hidden group">
          <span class="relative z-10">About Maria</span>
          <div class="absolute inset-0 bg-[#283454]/5 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
        </a>
        
        <!-- Visual separator -->
        <div class="h-6 w-px bg-gray-300 mx-2"></div>
        
        <!-- Services Group -->
        <a href="#services" class="nav-link primary text-gray-700 hover:text-[#283454] px-4 py-2 rounded-lg transition-all duration-300 font-semibold relative overflow-hidden group">
          <span class="relative z-10">Services</span>
          <div class="absolute inset-0 bg-[#283454]/5 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
        </a>
        
        <!-- Visual separator -->
        <div class="h-6 w-px bg-gray-300 mx-2"></div>
        
        <!-- Social Proof Group -->
        <a href="#testimonials" class="nav-link secondary text-gray-500 hover:text-[#283454] px-4 py-2 rounded-lg transition-all duration-300 font-medium relative overflow-hidden group">
          <span class="relative z-10">Testimonials</span>
          <div class="absolute inset-0 bg-[#283454]/5 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
        </a>
        <a href="#contact" class="nav-link primary text-gray-700 hover:text-[#283454] px-4 py-2 rounded-lg transition-all duration-300 font-semibold relative overflow-hidden group">
          <span class="relative z-10">Contact</span>
          <div class="absolute inset-0 bg-[#283454]/5 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
        </a>
        
        <!-- CTA Button integrated into nav flow -->
        <a href="#contact" class="button-cta ml-6 bg-[#283454] text-white px-8 py-3 rounded-xl font-semibold hover:bg-[#1e2741] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 relative overflow-hidden group">
          <span class="relative z-10">Book Consultation</span>
          <div class="absolute inset-0 bg-gradient-to-r from-[#1e2741] to-[#283454] translate-x-full group-hover:translate-x-0 transition-transform duration-300"></div>
        </a>
      </nav>
      
      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button type="button" id="mobile-menu-button" class="text-gray-700 hover:text-[#283454] focus:outline-none focus:text-[#283454] p-2 rounded-lg hover:bg-gray-100 transition-all duration-300" aria-label="Toggle mobile menu">
          <svg class="h-6 w-6 transition-transform duration-300" id="menu-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
          <svg class="h-6 w-6 hidden transition-transform duration-300" id="close-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="md:hidden hidden border-t border-gray-200/50 bg-white/95 backdrop-blur-md">
      <div class="px-4 py-3 space-y-3 max-h-screen overflow-y-auto">
        <!-- CTA at top for mobile priority -->
        <div class="pb-3 border-b border-gray-200">
          <a href="#contact" class="mobile-nav-link block w-full bg-[#283454] text-white px-6 py-4 rounded-xl font-semibold hover:bg-[#1e2741] transition-colors text-center shadow-lg">
            Book Consultation
          </a>
        </div>
        
        <!-- Navigation Links -->
        <a href="#home" class="mobile-nav-link block px-4 py-3 text-gray-700 hover:text-[#283454] hover:bg-[#283454]/5 rounded-lg transition-all duration-300 font-semibold">Home</a>
        <a href="#about" class="mobile-nav-link block px-4 py-3 text-gray-700 hover:text-[#283454] hover:bg-[#283454]/5 rounded-lg transition-all duration-300 font-semibold">About Maria</a>
        <a href="#services" class="mobile-nav-link block px-4 py-3 text-gray-700 hover:text-[#283454] hover:bg-[#283454]/5 rounded-lg transition-all duration-300 font-semibold">Services</a>
        <a href="#testimonials" class="mobile-nav-link block px-4 py-3 text-gray-500 hover:text-[#283454] hover:bg-[#283454]/5 rounded-lg transition-all duration-300 font-medium">Testimonials</a>
        <a href="#contact" class="mobile-nav-link block px-4 py-3 text-gray-700 hover:text-[#283454] hover:bg-[#283454]/5 rounded-lg transition-all duration-300 font-semibold">Contact</a>
      </div>
    </div>
  </div>
</header>

<!-- Spacer to prevent content overlap -->
<div class="header-spacer h-16 sm:h-18 md:h-20 lg:h-24"></div>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    
    if (mobileMenuButton && mobileMenu && menuIcon && closeIcon) {
      mobileMenuButton.addEventListener('click', function() {
        const isOpen = !mobileMenu.classList.contains('hidden');
        
        if (isOpen) {
          // Close menu
          mobileMenu.classList.add('hidden');
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
          // Re-enable body scroll
          document.body.style.overflow = '';
        } else {
          // Open menu
          mobileMenu.classList.remove('hidden');
          menuIcon.classList.add('hidden');
          closeIcon.classList.remove('hidden');
          // Prevent body scroll when menu is open on mobile
          if (window.innerWidth < 768) {
            document.body.style.overflow = 'hidden';
          }
        }
      });
      
      // Close menu when clicking on mobile nav links
      const mobileNavLinks = mobileMenu.querySelectorAll('.mobile-nav-link');
      mobileNavLinks.forEach((link: Element) => {
        link.addEventListener('click', function() {
          mobileMenu.classList.add('hidden');
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
          // Re-enable body scroll
          document.body.style.overflow = '';
        });
      });
    }

    // Enhanced smooth scrolling for all navigation links
    const allNavLinks = document.querySelectorAll('a[href^="#"]');
    allNavLinks.forEach((link: Element) => {
      link.addEventListener('click', function(this: HTMLAnchorElement, e: Event) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId || '');
        
        if (targetElement && targetElement instanceof HTMLElement) {
          // Dynamic header height calculation
          const header = document.querySelector('header') as HTMLElement | null;
          const headerHeight = header ? header.offsetHeight + 16 : 80;
          const elementPosition = targetElement.offsetTop - headerHeight;
          
          window.scrollTo({
            top: elementPosition,
            behavior: 'smooth'
          });
          
          // Update active state
          updateActiveNavLink(targetId || '');
        }
      });
    });

    // Active section highlighting
    function updateActiveNavLink(activeId: string) {
      // Remove active class from all nav links
      document.querySelectorAll('.nav-link').forEach((link: Element) => {
        link.classList.remove('active');
      });
      
      // Add active class to current link
      const activeLink = document.querySelector(`a[href="${activeId}"]`);
      if (activeLink && activeLink.classList.contains('nav-link')) {
        activeLink.classList.add('active');
      }
    }

    // Scroll spy functionality
    function handleScrollSpy() {
      const sections = document.querySelectorAll('section[id]');
      const header = document.querySelector('header') as HTMLElement | null;
      const headerHeight = header ? header.offsetHeight : 80;
      const scrollPos = window.scrollY + headerHeight + 20;

      sections.forEach((section: Element) => {
        if (section instanceof HTMLElement) {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.offsetHeight;
          const sectionId = section.getAttribute('id');

          if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
            updateActiveNavLink(`#${sectionId}`);
          }
        }
      });
    }

    // Throttled scroll listener for performance
    let ticking = false;
    window.addEventListener('scroll', function() {
      if (!ticking) {
        requestAnimationFrame(function() {
          handleScrollSpy();
          ticking = false;
        });
        ticking = true;
      }
    });

    // Handle window resize to close mobile menu if needed
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 768 && mobileMenu && menuIcon && closeIcon) {
        mobileMenu.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        document.body.style.overflow = '';
      }
    });
  });
</script>

<style>
  /* Enhanced hover animations with visual hierarchy */
  .nav-link {
    position: relative;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #283454, #1e2741);
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }
  
  .nav-link.primary:hover::after {
    width: 80%;
  }
  
  .nav-link.secondary:hover::after {
    width: 60%;
    background: linear-gradient(90deg, #6b7280, #283454);
  }
  
  /* Active state styling */
  .nav-link.active {
    color: #283454;
    background-color: rgba(40, 52, 84, 0.08);
  }
  
  .nav-link.active::after {
    width: 80%;
  }

  /* CTA Button pulse animation for attention */
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(40, 52, 84, 0.5); }
    70% { box-shadow: 0 0 0 10px rgba(40, 52, 84, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 52, 84, 0); }
  }

  .button-cta {
    animation: pulse 2.5s infinite;
  }
  
  /* Mobile menu improvements */
  #mobile-menu {
    animation: slideDown 0.3s ease-out;
    max-height: calc(100vh - 64px); /* Prevent menu from going below viewport */
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Enhanced focus states for accessibility */
  button:focus,
  a:focus {
    outline: 2px solid #283454;
    outline-offset: 2px;
    border-radius: 0.5rem;
  }

  /* Larger tap targets for mobile */
  @media (max-width: 768px) {
    .mobile-nav-link {
      min-height: 48px;
      display: flex;
      align-items: center;
    }
    
    /* Ensure mobile menu doesn't overflow */
    #mobile-menu {
      max-height: calc(100vh - 64px);
      overflow-y: auto;
    }
  }

  /* Visual separators responsiveness */
  @media (max-width: 1024px) {
    .nav-separator {
      display: none;
    }
  }

  /* Header spacing adjustments */
  .header-spacer {
    flex-shrink: 0;
  }
</style> 